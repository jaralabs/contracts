# Contracts Management System# Contracts Management System# Contracts Management System# Contracts

Sistema moderno de gestiÃ³n de contratos construido con Angular 18+, Module Federation y AWS Cognito.A modern contract management system built with Angular 18+, Module Federation, Playwright E2E testing, and AWS Cognito authentication.A modern contract management system built with Angular 18+, Module Federation, and AWS Cognito authentication.<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

## ğŸš€ InstalaciÃ³n## ğŸ—ï¸ Architecture## ğŸ—ï¸ Architectureâœ¨ **This workspace has been generated by [Nx, Smart Monorepos Â· Fast CI.](https://nx.dev)** âœ¨

### Requisitos PreviosThis project uses **Nx Workspace** with **Module Federation** architecture:This project uses **Nx Workspace** with **Module Federation** architecture:## Integrate with editors

- Node.js >= 18.x- **Host App**: Main application shell with authentication and routing- **Host App**: Main application shell with authentication and routingEnhance your Nx experience by installing [Nx Console](https://nx.dev/nx-console) for your favorite editor. Nx Console

- npm >= 9.x

- Cuenta de AWS con Cognito configurado- **ERP Microfrontend**: Contract management module loaded dynamically

### Pasos de InstalaciÃ³n- **Design System Library**: Shared UI components (Table, Input, Card, Layout, etc.)- **ERP Microfrontend**: Contract management module loaded dynamicallyprovides an interactive UI to view your projects, run tasks, generate code, and more! Available for VSCode, IntelliJ and

**1. Clonar el repositorio**- **Shared Library**: Services, models, and utilities

```bash- **Design System Library**: Shared UI components (Table, Input, Card, Layout, etc.)comes with a LSP for Vim users.

git clone https://github.com/jaralabs/contracts.git

cd contracts## ğŸ¨ Tech Stack

```

## ğŸ¨ Tech Stack## Nx plugins and code generators

**2. Instalar dependencias**

- **Angular 18+**: Standalone components with signals and zoneless change detection

```bash

npm install- **Tailwind CSS**: Utility-first CSS framework with custom brand colors- **Angular 18+**: Standalone components with new control flow syntaxAdd Nx plugins to leverage their code generators and automated, inferred tasks.

```

- **AWS Amplify**: Authentication with Cognito

**3. Configurar variables de entorno**

- **NgRx**: State management for user and UI state- **Tailwind CSS**: Utility-first CSS framework with custom Genius Soft brand colors

Crear archivo `.env` en la raÃ­z del proyecto:

- **Module Federation**: Micro frontend architecture

````env

AWS_REGION=us-east-1- **Lucide Icons**: Modern icon library- **AWS Amplify**: Authentication with Cognito```

AWS_USER_POOL_ID=tu-user-pool-id

AWS_USER_POOL_CLIENT_ID=tu-client-id- **JSON Server**: Mock API for development

AWS_IDENTITY_POOL_ID=tu-identity-pool-id

```- **Playwright**: E2E testing framework- **NgRx**: State management for user and UI state# Add plugin



> **Nota**: Reemplaza los valores con tus credenciales de AWS Cognito- **Jest**: Unit testing framework



**4. Configurar entorno de pruebas (opcional)**- **Module Federation**: Micro frontend architecturenpx nx add @nx/react



Crear archivo `.env.test`:## ğŸš€ Getting Started



```env- **Lucide Icons**: Modern icon library

TEST_USER_EMAIL=test@example.com

TEST_USER_PASSWORD=TuPassword123!### Prerequisites

````

- **JSON Server**: Mock API for development# Use code generator

**5. Iniciar servidores de desarrollo**

- Node.js >= 18.x

Abrir 3 terminales y ejecutar:

- npm >= 9.xnpx nx generate @nx/react:app demo

``````bash

# Terminal 1: JSON Server (API mock)### Installation## ğŸš€ Getting Started

npm run server

1. Clone the repository:# Run development server

# Terminal 2: Host App

npx nx serve host```bash### Prerequisitesnpx nx serve demo



# Terminal 3: ERP Microfrontendgit clone https://github.com/jaralabs/contracts.git

npx nx serve erp

```cd contracts- Node.js >= 18.x# View project details



**6. Acceder a la aplicaciÃ³n**```



- **AplicaciÃ³n principal**: http://localhost:4200- npm >= 9.xnpx nx show project demo --web

- **MÃ³dulo ERP**: http://localhost:4201

- **API Mock**: http://localhost:30002. Install dependencies:



## ğŸ¨ Stack TecnolÃ³gico`````



- **Angular 18+** - Standalone components con signals```bash

- **Tailwind CSS** - Framework CSS

- **AWS Amplify** - AutenticaciÃ³n con Cognitonpm install### Installation

- **NgRx** - GestiÃ³n de estado

- **Module Federation** - Arquitectura de microfrontends```

- **Playwright** - Tests E2E (25 tests)

- **Jest** - Tests unitariosRun `npx nx list` to get a list of available plugins and whether they have generators. Then run `npx nx list <plugin-name>` to see what generators are available.



## ğŸ§ª Tests3. Configure environment variables:



### Ejecutar E2E Tests1. Clone the repository:



```bash```bash

npx playwright test

```cp .env.example .env```bashLearn more about [code generators](https://nx.dev/features/generate-code) and [inferred tasks](https://nx.dev/concepts/inferred-tasks) in the docs.



### Ejecutar Tests Unitarios```



```bashgit clone https://github.com/jaralabs/contracts.git

npx nx test shared

```Edit `.env` with your AWS Cognito credentials:



## ğŸ—ï¸ Buildcd contracts## Running tasks



```bash```env

npx nx build host --configuration=production

npx nx build erp --configuration=productionAWS_REGION=us-east-1````

``````

AWS_USER_POOL_ID=your-user-pool-id

## ğŸ“ Estructura del Proyecto

AWS_USER_POOL_CLIENT_ID=your-client-idTo execute tasks with Nx use the following syntax:

````

contracts/AWS_IDENTITY_POOL_ID=your-identity-pool-id

â”œâ”€â”€ apps/

â”‚   â”œâ”€â”€ host/           # AplicaciÃ³n principal```2. Install dependencies:

â”‚   â””â”€â”€ erp/            # MÃ³dulo de contratos

â”œâ”€â”€ libs/

â”‚   â”œâ”€â”€ design-system/  # Componentes UI compartidos

â”‚   â””â”€â”€ shared/         # Servicios y modelos4. Configure test environment:`bash`

â”œâ”€â”€ e2e/                # Tests E2E con Playwright

â””â”€â”€ db.json             # API mock

````

```bashnpm installnpx nx <target> <project> <...options>

## ğŸ” AutenticaciÃ³n

cp .env.test.example .env.test

La aplicaciÃ³n usa AWS Cognito para autenticaciÃ³n con email y contraseÃ±a.

```

## ğŸ“„ Licencia

Edit `.env.test` with test credentials:

MIT

````env3. Configure environment variables:You can also run multiple targets:

## ğŸ‘¥ Autor

TEST_USER_EMAIL=test@example.com

**Andrew Jaramillo** ([@jaralabs](https://github.com/jaralabs))

TEST_USER_PASSWORD=YourTestPassword123!```bash

````

cp .env.example .env```

5. Start the development servers:

````npx nx run-many -t <target1> <target2>

```bash

# Start JSON Server (mock API)```

npm run server

Edit `.env` with your AWS Cognito credentials:

# In another terminal, start Host app

npx nx serve host```env..or add `-p` to filter specific projects



# In another terminal, start ERP microfrontendAWS_REGION=us-east-1

npx nx serve erp

```AWS_USER_POOL_ID=your-user-pool-id```



6. Open your browser:AWS_USER_POOL_CLIENT_ID=your-client-idnpx nx run-many -t <target1> <target2> -p <proj1> <proj2>



- Host: http://localhost:4200AWS_IDENTITY_POOL_ID=your-identity-pool-id```

- ERP: http://localhost:4201

````

## ğŸ¨ Design System

Targets can be defined in the `package.json` or `projects.json`. Learn more [in the docs](https://nx.dev/features/run-tasks).

### Brand Colors

4. Start the development servers:

- **Primary Orange**: `#F97316` (Tailwind orange-500)

- **Secondary Gray**: Gray scale for text and backgrounds```bash## Set up CI!

### Components# Start JSON Server (mock API)

- **HeaderComponent**: Application header with logo and user badgenpm run serverNx comes with local caching already built-in (check your `nx.json`). On CI you might want to go a step further.

- **LayoutComponent**: Main layout with collapsible sidebar and mobile menu

- **TableComponent**: Dynamic table with sorting, pagination, and row selection

- **InputComponent**: Form input with ControlValueAccessor

- **CardComponent**: Reusable card component with variants# In another terminal, start Host app- [Set up remote caching](https://nx.dev/features/share-your-cache)

- **FiltersComponent**: Dynamic filters panel

- **TabsComponent**: Tab navigation componentnpx nx serve host- [Set up task distribution across multiple machines](https://nx.dev/nx-cloud/features/distribute-task-execution)

- **LabelComponent**: Form label component

- [Learn more how to setup CI](https://nx.dev/recipes/ci)

## ğŸ“ Project Structure

# In another terminal, start ERP microfrontend

````

contracts/npx nx serve erp## Explore the project graph

â”œâ”€â”€ apps/

â”‚   â”œâ”€â”€ host/                     # Main application shell```

â”‚   â”‚   â”œâ”€â”€ src/

â”‚   â”‚   â”‚   â”œâ”€â”€ app/Run `npx nx graph` to show the graph of the workspace.

â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ guards/       # Auth guards

â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/     # Auth service5. Open your browser:It will show tasks that you can run with Nx.

â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ store/        # NgRx store

â”‚   â”‚   â”‚   â”‚   â””â”€â”€ *.component.ts- Host: http://localhost:4200

â”‚   â”‚   â”‚   â”œâ”€â”€ aws-config.ts

â”‚   â”‚   â”‚   â””â”€â”€ bootstrap.ts- ERP: http://localhost:4200/erp- [Learn more about Exploring the Project Graph](https://nx.dev/core-features/explore-graph)

â”‚   â”‚   â””â”€â”€ module-federation.config.js

â”‚   â””â”€â”€ erp/                      # Contract management microfrontend

â”‚       â”œâ”€â”€ src/

â”‚       â”‚   â””â”€â”€ app/## ğŸ¨ Design System## Connect with us!

â”‚       â”‚       â”œâ”€â”€ signature-page.component.*

â”‚       â”‚       â”œâ”€â”€ contract-detail.component.*

â”‚       â”‚       â””â”€â”€ app.routes.ts

â”‚       â””â”€â”€ module-federation.config.js### Brand Colors- [Join the community](https://nx.dev/community)

â”œâ”€â”€ libs/

â”‚   â”œâ”€â”€ design-system/            # Shared UI library- [Subscribe to the Nx Youtube Channel](https://www.youtube.com/@nxdevtools)

â”‚   â”‚   â””â”€â”€ src/

â”‚   â”‚       â”œâ”€â”€ components/- **Primary Orange**: `#F57C00` (Genius Soft corporate color)- [Follow us on Twitter](https://twitter.com/nxdevtools)

â”‚   â”‚       â””â”€â”€ lib/

â”‚   â””â”€â”€ shared/                   # Shared services & models- **Primary Scale**: 50-900 (based on orange)

â”‚       â””â”€â”€ src/- **Secondary Scale**: Gray colors for text and backgrounds

â”‚           â”œâ”€â”€ lib/

â”‚           â”‚   â”œâ”€â”€ services/### Components

â”‚           â”‚   â””â”€â”€ config/

â”‚           â””â”€â”€ index.ts- `HeaderComponent`: Application header with logo and user badge

â”œâ”€â”€ e2e/                          # Playwright E2E tests- `LayoutComponent`: Main layout with collapsible sidebar

â”‚   â”œâ”€â”€ auth.spec.ts- `TableComponent`: Dynamic table with sorting, pagination, and selection

â”‚   â”œâ”€â”€ contract-detail.spec.ts- `InputComponent`: Form input with ControlValueAccessor

â”‚   â”œâ”€â”€ contracts-list.spec.ts- `CardComponent`: Reusable card component

â”‚   â”œâ”€â”€ pwa.spec.ts- `LabelComponent`: Form label component

â”‚   â””â”€â”€ helpers/

â”‚       â””â”€â”€ auth.helper.ts## ğŸ“ Project Structure

â”œâ”€â”€ db.json                       # Mock API data

â”œâ”€â”€ playwright.config.ts```

â””â”€â”€ tailwind.config.jscontracts/

```â”œâ”€â”€ apps/

â”‚   â”œâ”€â”€ host/              # Main application

## ğŸ” Authenticationâ”‚   â”‚   â”œâ”€â”€ src/

â”‚   â”‚   â”‚   â”œâ”€â”€ app/

The application uses **AWS Cognito** for authentication:â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ guards/      # Auth guards

â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/    # Auth service

- Email/password loginâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ store/       # NgRx store

- Secure password validationâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ *.component.ts

- Password change flowâ”‚   â”‚   â”‚   â”œâ”€â”€ environments/    # Environment configs

- Auth guards protecting routesâ”‚   â”‚   â”‚   â””â”€â”€ aws-config.ts

- Centralized auth serviceâ”‚   â”‚   â””â”€â”€ module-federation.config.js

- NgRx store for user stateâ”‚   â””â”€â”€ erp/               # Contract management microfrontend

â”‚       â”œâ”€â”€ src/

## ğŸ§ª Testingâ”‚       â”‚   â””â”€â”€ app/

â”‚       â”‚       â”œâ”€â”€ home.component.ts

### E2E Tests with Playwrightâ”‚       â”‚       â””â”€â”€ signature-page.component.*

â”‚       â””â”€â”€ module-federation.config.js

```bashâ”œâ”€â”€ libs/

# Run all E2E testsâ”‚   â””â”€â”€ design-system/     # Shared UI library

npx playwright testâ”‚       â””â”€â”€ src/

â”‚           â””â”€â”€ components/

# Run specific test fileâ”œâ”€â”€ db.json               # Mock API data

npx playwright test e2e/auth.spec.tsâ””â”€â”€ tailwind.config.js    # Tailwind configuration

````

# Run tests in headed mode

npx playwright test --headed## ğŸ” Authentication

# Run tests in UI modeThe application uses **AWS Cognito** for authentication

npx playwright test --ui

- Email/password login

# View test report- Password change flow

npx playwright show-report- Auth guards protecting routes

```````- Centralized auth service

- NgRx store for user state

**Test Coverage:**

- âœ… Authentication flow (4 tests)### Test Users

- âœ… PWA features (6 tests)

- âœ… Contract detail page (7 tests)Configure test users in your AWS Cognito User Pool.

- âœ… Contracts list (8 tests)

## ğŸ§ª Testing

Total: **25 E2E tests**

```bash

### Unit Tests with Jest# Run all tests

npx nx run-many -t test

```bash

# Run all unit tests# Run tests for specific project

npx nx run-many -t testnpx nx test host

npx nx test erp

# Run tests for specific projectnpx nx test design-system

npx nx test host

npx nx test erp# Run tests with coverage

npx nx test design-systemnpx nx test host --coverage

npx nx test shared```



# Run tests with coverage## ğŸ—ï¸ Building

npx nx test shared --coverage

``````bash

# Build for production

## ğŸ—ï¸ Buildingnpx nx run-many -t build



```bash# Build specific app

# Build for productionnpx nx build host --configuration=production

npx nx run-many -t build --configuration=productionnpx nx build erp --configuration=production

```````

# Build specific app

npx nx build host --configuration=production## ğŸ“ Development Guidelines

npx nx build erp --configuration=production

`````### Commit Messages



## ğŸš¢ DeploymentFollow [Conventional Commits](https://www.conventionalcommits.org/):



The application can be deployed to any static hosting service:- `feat:` New features

- `fix:` Bug fixes

1. Build the applications- `refactor:` Code refactoring

2. Upload `dist/apps/host` to your hosting service- `docs:` Documentation changes

3. Configure environment variables- `style:` Code style changes

4. Set up AWS Cognito- `test:` Test additions or changes

- `chore:` Build process or auxiliary tool changes

## ğŸ“ Development Guidelines

Example:

### Code Style```bash

git commit -m "feat: add contract filtering functionality"

- Use Angular standalone components```

- Use signals for reactive state

- Use new control flow syntax (`@if`, `@for`, `@switch`)### Code Style

- Use Tailwind utility classes

- Follow single responsibility principle- Use Angular standalone components

- Write meaningful component and variable names- Use new control flow syntax (`@if`, `@for`)

- Keep components focused and small- Use Tailwind utility classes instead of SCSS

- Follow single responsibility principle

### Commit Messages- Write meaningful component and variable names



Follow [Conventional Commits](https://www.conventionalcommits.org/):## ğŸ¯ Available Scripts



```bash- `npx nx serve host` - Start host application

feat: add contract filtering functionality- `npx nx serve erp` - Start ERP microfrontend

fix: resolve routing issue in ERP module- `npm run server` - Start JSON Server (port 3000)

refactor: simplify contracts service- `npx nx build host` - Build host application

docs: update README with testing instructions- `npx nx test host` - Run tests

test: add E2E tests for contract detail page- `npx nx lint host` - Run ESLint

chore: update dependencies

```## ğŸ¤ Contributing



## ğŸ¯ Available Scripts1. Create a feature branch: `git checkout -b feat/my-feature`

2. Make your changes

### Development3. Run tests: `npx nx test`

4. Commit using conventional commits

- `npx nx serve host` - Start host application (port 4200)5. Push and create a Pull Request

- `npx nx serve erp` - Start ERP microfrontend (port 4201)

- `npm run server` - Start JSON Server (port 3000)## ğŸ“„ License



### TestingMIT



- `npx playwright test` - Run E2E tests## ğŸ‘¥ Authors

- `npx nx test <project>` - Run unit tests

- Andrew Jaramillo (@jaralabs)

### Build

## ğŸ› Known Issues

- `npx nx build host` - Build host application

- `npx nx build erp` - Build ERP microfrontend- None at the moment



### Lint & Format## ğŸ—ºï¸ Roadmap



- `npx nx lint <project>` - Run ESLint- [ ] Add unit tests for all components

- `npx nx format:write` - Format code with Prettier- [ ] Add E2E tests with Cypress

- [ ] Implement error boundary

## ğŸ”§ Configuration- [ ] Add toast notification system

- [ ] Add skeleton loaders

### Module Federation- [ ] Implement contract CRUD operations

- [ ] Add contract PDF generation

The project uses Module Federation to load the ERP module dynamically:- [ ] Add multi-language support (i18n)

- [ ] Add dark mode support

```typescript

// host/module-federation.config.js## ğŸ“š Learn More About Nx

remotes: ['erp']

- [Nx Documentation](https://nx.dev)

// erp/module-federation.config.js- [Nx Console](https://nx.dev/nx-console) - VSCode/IntelliJ plugin

exposes: {- [Explore the project graph](https://nx.dev/core-features/explore-graph): `npx nx graph`

  './Routes': './src/app/app.routes.ts'````

}
`````

### Routing

The ERP module routes are loaded dynamically:

```typescript
{
  path: 'erp',
  loadChildren: () => loadRemoteModule('erp', './Routes')
}
```

## ğŸŒ API Endpoints

Mock API runs on `http://localhost:3000`:

- `GET /contratos` - Get all contracts
- `GET /contratos/:id` - Get contract by ID
- `POST /contratos` - Create contract
- `PUT /contratos/:id` - Update contract
- `PATCH /contratos/:id` - Partial update
- `DELETE /contratos/:id` - Delete contract

## ğŸ¤ Contributing

1. Create a feature branch: `git checkout -b feat/my-feature`
2. Make your changes
3. Run tests: `npx playwright test && npx nx run-many -t test`
4. Commit using conventional commits
5. Push and create a Pull Request

## ğŸ“„ License

MIT

## ğŸ‘¥ Author

**Andrew Jaramillo** ([@jaralabs](https://github.com/jaralabs))

## ğŸ™ Acknowledgments

- Built with [Nx](https://nx.dev)
- Icons by [Lucide](https://lucide.dev)
- Styled with [Tailwind CSS](https://tailwindcss.com)

## ğŸ“š Learn More

- [Nx Documentation](https://nx.dev)
- [Angular Documentation](https://angular.dev)
- [Module Federation](https://module-federation.github.io)
- [Playwright Documentation](https://playwright.dev)
- [AWS Amplify Documentation](https://docs.amplify.aws)
